ğŸ“˜ ä¸ªäºº AI åŠ©æ‰‹å¼€å‘è¯´æ˜ä¹¦ (PAPS v2.0)

---

# ä¸€ã€é¡¹ç›®æ¦‚è¿°

ä¸€ä¸ªåŸºäº OpenAI å…¼å®¹ API çš„æœ¬åœ° AI ä¸ªäººåŠ©æ‰‹ï¼Œæ”¯æŒå·¥å…·è°ƒç”¨ï¼ˆTool Useï¼‰ã€å¤šæ­¥è§„åˆ’ã€è¯­ä¹‰è®°å¿†ã€æµå¼è¾“å‡ºç­‰èƒ½åŠ›ã€‚ç›®æ ‡æ˜¯æˆä¸ºç±»ä¼¼ Claude Code / OpenClaw çš„ç»ˆç«¯ AI åŠ©æ‰‹ã€‚

## é¡¹ç›®ç»“æ„

```
ai agent/
â”œâ”€â”€ run.py                  # å…¥å£æ–‡ä»¶
â”œâ”€â”€ .env                    # API Key (ä¸æäº¤åˆ° Git)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt        # ä¾èµ–æ¸…å•
â”œâ”€â”€ core/                   # æ ¸å¿ƒæ¡†æ¶
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py           # é…ç½®ä¸­å¿ƒ (API Key, æ¨¡å‹å, é£é™©å·¥å…·åˆ—è¡¨)
â”‚   â”œâ”€â”€ client.py           # OpenAI å®¢æˆ·ç«¯åˆå§‹åŒ–
â”‚   â”œâ”€â”€ engine.py           # æ ¸å¿ƒå¯¹è¯å¾ªç¯ (Agent Loop)
â”‚   â””â”€â”€ ui.py               # Rich ç»ˆç«¯ UI
â”œâ”€â”€ skills/                 # æŠ€èƒ½æ’ä»¶ç›®å½•
â”‚   â”œâ”€â”€ __init__.py         # æŠ€èƒ½æ³¨å†Œå…¥å£
â”‚   â”œâ”€â”€ registry.py         # æ³¨å†Œå™¨ (register / register_simple)
â”‚   â”œâ”€â”€ file_tools.py       # æ–‡ä»¶æ“ä½œ (move_file_by_ext)
â”‚   â”œâ”€â”€ code_tools.py       # ä»£ç å†™å…¥ (write_code_file)
â”‚   â”œâ”€â”€ edit_tools.py       # ç²¾ç¡®ç¼–è¾‘ (edit_file, find & replace)
â”‚   â”œâ”€â”€ read_files.py       # æ–‡ä»¶è¯»å– (read_file)
â”‚   â”œâ”€â”€ search_tools.py     # æ–‡ä»¶æœç´¢ (find_file)
â”‚   â”œâ”€â”€ shell_tools.py      # Shell å‘½ä»¤ (run_command, list_dir) + æ²™ç®±
â”‚   â”œâ”€â”€ plan_tools.py       # å¤šæ­¥è§„åˆ’ (create_plan, update_plan)
â”‚   â”œâ”€â”€ system_tools.py     # ç³»ç»ŸçŠ¶æ€ (get_system_status)
â”‚   â”œâ”€â”€ memory_tools.py     # æ–‡ä»¶è®°å¿† (save/read/list_memories)
â”‚   â””â”€â”€ rag_tools.py        # å‘é‡è®°å¿† RAG (rag_save/search/status)
â”œâ”€â”€ memories/               # è®°å¿†æ•°æ®
â”‚   â”œâ”€â”€ global.txt          # å…¨å±€è®°å¿† (æ¯è½®å¯¹è¯æ³¨å…¥ System Prompt)
â”‚   â”œâ”€â”€ chroma_db/          # chromadb å‘é‡æ•°æ®åº“
â”‚   â””â”€â”€ chat_history/       # å¯¹è¯å†å² (latest.json)
â””â”€â”€ test/                   # æµ‹è¯•æ–‡ä»¶
```

## ä¾èµ–å®‰è£…

```bash
pip install -r requirements.txt
```

ä¾èµ–æ¸…å•ï¼š`openai`, `python-dotenv`, `psutil`, `rich`, `chromadb`

## å¯åŠ¨

```bash
python run.py
```

---

# äºŒã€æ ¸å¿ƒæ¶æ„

## 2.1 Agent Loopï¼ˆ`core/engine.py`ï¼‰

```
ç”¨æˆ·è¾“å…¥ â†’ [ä¸Šä¸‹æ–‡è£å‰ª] â†’ API è°ƒç”¨ (stream) â†’ æœ‰ tool_callï¼Ÿ
                                                  â”œâ”€ å¦ â†’ æµå¼è¾“å‡ºå›å¤ â†’ ç­‰å¾…ä¸‹æ¬¡è¾“å…¥
                                                  â””â”€ æ˜¯ â†’ å®¡æ‰¹ â†’ æ‰§è¡Œ (å¸¦é‡è¯•) â†’ ç»“æœå›ä¼  â†’ å†æ¬¡è°ƒç”¨ API
```

**å…³é”®å‚æ•°ï¼š**

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|----|------|
| `MAX_HISTORY_ROUNDS` | 20 | ä¸Šä¸‹æ–‡ä¿ç•™æœ€å¤§è½®æ•° |
| `MAX_TOOL_RETRIES` | 3 | å·¥å…·æ‰§è¡Œå¤±è´¥é‡è¯•æ¬¡æ•° |
| `MAX_AGENT_STEPS` | 15 | å•æ¬¡å¯¹è¯æœ€å¤§å¾ªç¯æ­¥æ•° |

**ç‰¹æ€§ï¼š**
- **æµå¼è¾“å‡º**ï¼šä½¿ç”¨ `stream=True`ï¼Œé€ token æ˜¾ç¤º AI å›å¤
- **é”™è¯¯é‡è¯•**ï¼šå·¥å…·å¼‚å¸¸æ—¶è‡ªåŠ¨é‡è¯•ï¼Œé—´éš” 0.5sï¼Œè¾¾ä¸Šé™åè¿”å›é”™è¯¯ç»™ AI åˆ†æ
- **å¯¹è¯æŒä¹…åŒ–**ï¼šæ¯è½®è‡ªåŠ¨ä¿å­˜ï¼Œå¯åŠ¨æ—¶å¯æ¢å¤ä¸Šæ¬¡å¯¹è¯
- **æ­»å¾ªç¯ä¿æŠ¤**ï¼š`MAX_AGENT_STEPS` é™åˆ¶å•æ¬¡å¯¹è¯çš„ Agent æ­¥æ•°

## 2.2 å®¡æ‰¹ç³»ç»Ÿï¼ˆ`core/ui.py` + `core/config.py`ï¼‰

`RISKY_TOOLS` é›†åˆä¸­çš„å·¥å…·æ‰§è¡Œå‰éœ€ç”¨æˆ·å®¡æ‰¹ï¼š

| é€‰é¡¹ | åŠŸèƒ½ |
|------|------|
| `y` | æ‰¹å‡†æ‰§è¡Œ |
| `n` | æ‹’ç» |
| `v` | æŸ¥çœ‹è¯¦æƒ…ï¼ˆä»£ç é«˜äº® / diff é¢„è§ˆ / JSONï¼‰ |
| `r` | æ‹’ç»å¹¶æä¾›ä¿®æ”¹æ„è§ |
| `m` | æ‰‹åŠ¨ä¿®æ”¹å‚æ•° |

**å½“å‰é£é™©å·¥å…·ï¼š** `write_code_file`, `move_file_by_ext`, `delete_file`, `save_memory`, `run_command`, `edit_file`

## 2.3 å®‰å…¨æœºåˆ¶

- **æ ¸å¿ƒæ–‡ä»¶ä¿æŠ¤**ï¼š`write_code_file` å’Œ `edit_file` ç¦æ­¢ä¿®æ”¹ `config.py`, `engine.py` ç­‰ç³»ç»Ÿæ–‡ä»¶
- **å‘½ä»¤æ²™ç®±**ï¼ˆ`shell_tools.py`ï¼‰ï¼š
  - 14 æ¡å±é™©å‘½ä»¤æ­£åˆ™é»‘åå•ï¼ˆ`rm -rf`, `format`, `shutdown` ç­‰ï¼‰
  - 6 æ¡ç¦æ­¢æ“ä½œç›®å½•ï¼ˆ`C:\Windows`, `/etc` ç­‰ï¼‰
- **API Key ä¿æŠ¤**ï¼š`.env` æ–‡ä»¶åœ¨ `.gitignore` ä¸­

## 2.4 è®°å¿†ç³»ç»Ÿ

| å±‚çº§ | æ¨¡å— | æœºåˆ¶ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| å…¨å±€è®°å¿† | `memory_tools.py` | å†™å…¥ `global.txt`ï¼Œè‡ªåŠ¨æ³¨å…¥ System Prompt | ç”¨æˆ·åå¥½ã€å¸¸é©»ä¿¡æ¯ |
| è¯é¢˜è®°å¿† | `memory_tools.py` | æŒ‰ topic å­˜ä¸ºç‹¬ç«‹æ–‡ä»¶ï¼ŒæŒ‰éœ€è°ƒç”¨ | é¡¹ç›®æ–‡æ¡£ã€æŠ€æœ¯ç¬”è®° |
| è¯­ä¹‰è®°å¿† | `rag_tools.py` | chromadb å‘é‡æ£€ç´¢ï¼Œcosine ç›¸ä¼¼åº¦ | æ¨¡ç³Šæœç´¢ã€é›¶æ•£çŸ¥è¯† |
| å¯¹è¯å†å² | `engine.py` | JSON åºåˆ—åŒ–ï¼Œå¯åŠ¨æ—¶å¯æ¢å¤ | ä¸Šä¸‹æ–‡å»¶ç»­ |

---

# ä¸‰ã€æŠ€èƒ½æ€»è§ˆï¼ˆ48 ä¸ªï¼‰

## ä»£ç ç¼–è¾‘ä¸æ–‡ä»¶ç®¡ç†ï¼ˆ12 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ | å®¡æ‰¹ |
|---|--------|------|------|------|
| 1 | `edit_file` | edit_tools.py | ç²¾ç¡® find & replace | âœ… |
| 2 | `insert_text` | edit_tools.py | æŒ‰è¡Œå·æ’å…¥æ–‡æœ¬ | âœ… |
| 3 | `delete_lines` | edit_tools.py | åˆ é™¤æŒ‡å®šè¡ŒèŒƒå›´ | âœ… |
| 4 | `multi_edit` | edit_tools.py | å•æ–‡ä»¶å¤šå¤„æ‰¹é‡ç¼–è¾‘ | âœ… |
| 5 | `write_code_file` | code_tools.py | æ•´æ–‡ä»¶è¦†ç›–å†™å…¥ | âœ… |
| 6 | `read_file` | read_files.py | è¯»å–æ–‡ä»¶å†…å®¹ | - |
| 7 | `create_file` | file_manager.py | åˆ›å»ºæ–°æ–‡ä»¶ | âœ… |
| 8 | `delete_file` | file_manager.py | åˆ é™¤æ–‡ä»¶/ç›®å½• | âœ… |
| 9 | `copy_file` | file_manager.py | å¤åˆ¶æ–‡ä»¶/ç›®å½• | - |
| 10 | `rename_file` | file_manager.py | é‡å‘½å/ç§»åŠ¨ | âœ… |
| 11 | `get_file_info` | file_manager.py | æ–‡ä»¶å…ƒä¿¡æ¯ | - |
| 12 | `move_file_by_ext` | file_tools.py | æŒ‰æ‰©å±•åç§»åŠ¨ | âœ… |

## æœç´¢ä¸å¯¼èˆªï¼ˆ4 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ |
|---|--------|------|------|
| 13 | `find_file` | search_tools.py | æŒ‰æ–‡ä»¶åæœç´¢ |
| 14 | `grep` | grep_tools.py | å…¨æ–‡æ­£åˆ™æœç´¢ (æ”¯æŒä¸Šä¸‹æ–‡/è¿‡æ»¤) |
| 15 | `tree` | grep_tools.py | ç›®å½•æ ‘å¯è§†åŒ– |
| 16 | `list_dir` | shell_tools.py | åˆ—å‡ºç›®å½•å†…å®¹ |

## ç³»ç»Ÿä¸ Shellï¼ˆ2 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ | å®¡æ‰¹ |
|---|--------|------|------|------|
| 17 | `run_command` | shell_tools.py | Shell å‘½ä»¤æ‰§è¡Œ (æ²™ç®±) | âœ… |
| 18 | `get_system_status` | system_tools.py | CPU/å†…å­˜ä½¿ç”¨ç‡ | - |

## è§„åˆ’ä¸è®°å¿†ï¼ˆ8 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ |
|---|--------|------|------|
| 19 | `create_plan` | plan_tools.py | åˆ›å»ºå¤šæ­¥æ‰§è¡Œè®¡åˆ’ |
| 20 | `update_plan` | plan_tools.py | æ›´æ–°è®¡åˆ’è¿›åº¦ |
| 21 | `save_memory` | memory_tools.py | ä¿å­˜å…¨å±€/è¯é¢˜è®°å¿† |
| 22 | `read_memory` | memory_tools.py | è¯»å–è¯é¢˜è®°å¿† |
| 23 | `list_memories` | memory_tools.py | åˆ—å‡ºæ‰€æœ‰è¯é¢˜ |
| 24 | `rag_save` | rag_tools.py | è¯­ä¹‰å­˜å‚¨ (chromadb) |
| 25 | `rag_search` | rag_tools.py | è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢ |
| 26 | `rag_status` | rag_tools.py | è®°å¿†åº“çŠ¶æ€ |

## å¤–éƒ¨ AI & ç½‘ç»œï¼ˆ4 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ |
|---|--------|------|------|
| 27 | `call_ai` | external_ai.py | è°ƒç”¨å¤–éƒ¨ AI (6 æä¾›å•†) |
| 28 | `list_ai_providers` | external_ai.py | åˆ—å‡º AI æä¾›å•†çŠ¶æ€ |
| 29 | `fetch_url` | web_tools.py | æŠ“å–ç½‘é¡µçº¯æ–‡æœ¬ |
| 30 | `web_search` | web_tools.py | å¤šå¼•æ“ç½‘ç»œæœç´¢ |

## ç¿»è¯‘ä¸æ–‡çŒ®ï¼ˆ3 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ |
|---|--------|------|------|
| 31 | `translate` | doc_tools.py | AI ç¿»è¯‘ (4 ç§é£æ ¼) |
| 32 | `read_pdf` | doc_tools.py | PDF æ–‡æœ¬æå– |
| 33 | `summarize_document` | doc_tools.py | æ–‡æ¡£ AI æ‘˜è¦ |

## æ—¥å¸¸ä¿¡æ¯ç®¡ç†ï¼ˆ3 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ |
|---|--------|------|------|
| 34 | `todo_manage` | daily_tools.py | å¾…åŠäº‹é¡¹ CRUD |
| 35 | `note_manage` | daily_tools.py | Markdown ç¬”è®°ç®¡ç† |
| 36 | `reminder_manage` | daily_tools.py | æé†’äº‹é¡¹ç®¡ç† |

## è§†é¢‘å¤„ç†ï¼ˆ4 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ | å®¡æ‰¹ |
|---|--------|------|------|------|
| 37 | `video_info` | video_tools.py | FFprobe è§†é¢‘ä¿¡æ¯ | - |
| 38 | `video_transcript` | video_tools.py | å­—å¹•/è½¬å½•æå– | - |
| 39 | `video_summary` | video_tools.py | è§†é¢‘ AI æ€»ç»“ | - |
| 40 | `video_clip` | video_tools.py | FFmpeg è§†é¢‘å‰ªè¾‘ | âœ… |

## çŸ¥è¯†åº“ï¼ˆ3 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ |
|---|--------|------|------|
| 41 | `kb_build` | knowledge_tools.py | ä»æ–‡ä»¶æ„å»ºå‘é‡çŸ¥è¯†åº“ |
| 42 | `kb_query` | knowledge_tools.py | è¯­ä¹‰æœç´¢çŸ¥è¯†åº“ |
| 43 | `kb_manage` | knowledge_tools.py | ç®¡ç†çŸ¥è¯†åº“ |

## PPT ç”Ÿæˆï¼ˆ2 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ |
|---|--------|------|------|
| 44 | `ppt_generate` | ppt_tools.py | ç”Ÿæˆ PPTX æ–‡ä»¶ |
| 45 | `ppt_outline` | ppt_tools.py | AI ç”Ÿæˆ PPT å¤§çº² |

## ç¤¾äº¤ä¿¡æ¯æµï¼ˆ3 ä¸ªï¼‰

| # | æŠ€èƒ½å | æ–‡ä»¶ | è¯´æ˜ |
|---|--------|------|------|
| 46 | `rss_manage` | social_tools.py | RSS è®¢é˜…ç®¡ç†ä¸æŠ“å– |
| 47 | `feed_digest` | social_tools.py | ä¿¡æ¯æµ AI æ‘˜è¦ |
| 48 | `social_connector` | social_tools.py | ç¤¾äº¤å¹³å° API è¿æ¥å™¨ |

---

# å››ã€æ’ä»¶å¼€å‘è§„èŒƒ

æ¬¢è¿ä¸º AI åŠ©æ‰‹å¼€å‘æ–°æŠ€èƒ½ï¼ä¸€ä¸ªæ ‡å‡†çš„æ’ä»¶å°±æ˜¯ä¸€ä¸ª Python æ–‡ä»¶ï¼ˆ`.py`ï¼‰ï¼Œæ”¾åœ¨ `skills/` ç›®å½•ä¸‹ã€‚

## 4.1 ä¸¤ç§æ³¨å†Œæ–¹å¼

### æ–¹å¼ä¸€ï¼šå®Œæ•´ Schema æ³¨å†Œï¼ˆæ¨èï¼Œæ§åˆ¶åŠ›å¼ºï¼‰

```python
from .registry import register

# Schema å®šä¹‰ (OpenAI function calling æ ¼å¼)
my_tool_schema = {
    "type": "function",
    "function": {
        "name": "my_tool_name",
        "description": "å·¥å…·æè¿°ï¼ŒAI é å®ƒå†³å®šä½•æ—¶è°ƒç”¨ã€‚è¶Šè¯¦ç»†è¶Šå¥½ã€‚",
        "parameters": {
            "type": "object",
            "properties": {
                "param1": {"type": "string", "description": "å‚æ•°1æè¿°"},
                "param2": {"type": "integer", "description": "å‚æ•°2æè¿°"}
            },
            "required": ["param1"]
        }
    }
}

@register(my_tool_schema)
def my_tool_name(param1: str, param2: int = 10):
    # æ‰§è¡Œé€»è¾‘...
    return "ç»“æœå­—ç¬¦ä¸²"
```

### æ–¹å¼äºŒï¼šç®€æ˜“ META æ³¨å†Œï¼ˆå¿«é€Ÿä¸Šæ‰‹ï¼‰

```python
from .registry import register_simple

META = {
    "name": "calculate_bmi",
    "description": "è®¡ç®—BMIæŒ‡æ•°ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£èº«ä½“å¥åº·çŠ¶å†µ",
    "args": {
        "height": "èº«é«˜ (å•ä½: ç±³ï¼Œä¾‹å¦‚ 1.75)",
        "weight": "ä½“é‡ (å•ä½: å…¬æ–¤ï¼Œä¾‹å¦‚ 70)"
    }
}

@register_simple(META)
def run(height, weight):
    h = float(height)
    w = float(weight)
    bmi = w / (h * h)
    if bmi < 18.5:
        return f"ä½ çš„BMIæ˜¯ {bmi:.1f}ï¼Œå±äºä½“é‡è¿‡è½»ã€‚"
    elif bmi < 24.9:
        return f"ä½ çš„BMIæ˜¯ {bmi:.1f}ï¼Œå±äºæ­£å¸¸èŒƒå›´ã€‚"
    else:
        return f"ä½ çš„BMIæ˜¯ {bmi:.1f}ï¼Œå±äºè¶…é‡ã€‚"
```

## 4.2 æ³¨å†Œæ–°æŠ€èƒ½çš„æ­¥éª¤

1. åœ¨ `skills/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼ˆå¦‚ `skills/my_tool.py`ï¼‰
2. ç¼–å†™ Schema + å®ç°å‡½æ•°ï¼Œç”¨ `@register` è£…é¥°
3. åœ¨ `skills/__init__.py` ä¸­æ·»åŠ å¯¼å…¥ï¼š`from skills import my_tool`
4. å¦‚æœæ˜¯é«˜é£é™©å·¥å…·ï¼Œåœ¨ `core/config.py` çš„ `RISKY_TOOLS` ä¸­æ·»åŠ å·¥å…·å
5. é‡å¯ç¨‹åºï¼Œæ–°æŠ€èƒ½è‡ªåŠ¨ç”Ÿæ•ˆ

## 4.3 å¼€å‘æ³¨æ„äº‹é¡¹

- **å‡½æ•°å‚æ•°å**å¿…é¡»ä¸ Schema ä¸­ `properties` çš„ Key å®Œå…¨ä¸€è‡´
- **è¿”å›å€¼**å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼ˆ`str`ï¼‰ï¼Œå¤æ‚æ•°æ®è¯·è½¬ JSON æˆ–æ€»ç»“ä¸ºæ–‡å­—
- **description** æ˜¯ AI åˆ¤æ–­æ˜¯å¦è°ƒç”¨å·¥å…·çš„å”¯ä¸€ä¾æ®ï¼Œå†™å¾—è¶Šè¯¦ç»†è¶Šå¥½
- å±é™©æ“ä½œè¯·æ ‡æ³¨ `ã€å±é™©æ“ä½œã€‘` å‰ç¼€ï¼Œå¹¶åŠ å…¥ `RISKY_TOOLS`

---

# äº”ã€é…ç½®è¯´æ˜

## 5.1 æ ¸å¿ƒé…ç½®ï¼ˆ`core/config.py`ï¼‰

| é…ç½®é¡¹ | è¯´æ˜ | å½“å‰å€¼ |
|--------|------|--------|
| `API_KEY` | ä» `.env` è¯»å– `KIMI_API_KEY` | - |
| `BASE_URL` | API ç«¯ç‚¹ | `https://api.moonshot.cn/v1` |
| `MODEL_NAME` | æ¨¡å‹åç§° | `moonshot-v1-32k` |
| `RISKY_TOOLS` | éœ€å®¡æ‰¹çš„å·¥å…·é›†åˆ | 12 ä¸ª |

åˆ‡æ¢æ¨¡å‹åªéœ€ä¿®æ”¹ `config.py` ä¸­çš„ `BASE_URL` å’Œ `MODEL_NAME`ã€‚

## 5.2 ç¯å¢ƒå˜é‡ï¼ˆ`.env`ï¼‰

```env
# å¿…éœ€
KIMI_API_KEY=sk-xxx

# å¤–éƒ¨ AI æä¾›å•† (æŒ‰éœ€é…ç½®)
OPENAI_API_KEY=sk-xxx
DEEPSEEK_API_KEY=sk-xxx
ANTHROPIC_API_KEY=sk-xxx
ZHIPU_API_KEY=xxx
QWEN_API_KEY=sk-xxx

# æœç´¢å¼•æ“ (æŒ‰éœ€é…ç½®)
SERPER_API_KEY=xxx       # Google Search (serper.dev)
BING_API_KEY=xxx         # Bing Search

# ç¤¾äº¤å¹³å° (æŒ‰éœ€é…ç½®)
GITHUB_TOKEN=ghp_xxx
TWITTER_BEARER_TOKEN=xxx
TELEGRAM_BOT_TOKEN=xxx
WEIBO_API_KEY=xxx
WECHAT_MP_TOKEN=xxx
REDDIT_CLIENT_SECRET=xxx
```

## 5.3 æ•°æ®ç›®å½•

| ç›®å½• | è¯´æ˜ |
|------|------|
| `memories/global.txt` | å…¨å±€è®°å¿† |
| `memories/chroma_db/` | è¯­ä¹‰è®°å¿†å‘é‡åº“ |
| `memories/chat_history/` | å¯¹è¯å†å² |
| `data/todos.json` | å¾…åŠäº‹é¡¹ |
| `data/reminders.json` | æé†’äº‹é¡¹ |
| `data/notes/` | Markdown ç¬”è®° |
| `data/knowledge_base/` | çŸ¥è¯†åº“ (chromadb) |
| `data/ppt_output/` | PPT è¾“å‡º |
| `data/social/` | RSS è®¢é˜…å’Œç¤¾äº¤é…ç½® |

## 5.4 å¯é€‰å¤–éƒ¨å·¥å…·

| å·¥å…· | ç”¨é€” | å®‰è£… |
|------|------|------|
| FFmpeg | è§†é¢‘ä¿¡æ¯/å‰ªè¾‘/éŸ³é¢‘æå– | [ffmpeg.org](https://ffmpeg.org) |
| PyPDF2 | PDF è¯»å– | `pip install PyPDF2` |
| python-pptx | PPT ç”Ÿæˆ | `pip install python-pptx` |
| openai-whisper | è¯­éŸ³è½¬æ–‡å­— | `pip install openai-whisper` |
| youtube-transcript-api | YouTube å­—å¹• | `pip install youtube-transcript-api` |

---

# å…­ã€æœ€è¿‘æ›´æ–°ï¼ˆ2026-02-18ï¼‰

## 6.1 å‰ç«¯äº¤äº’

- å‘½ä»¤é¢æ¿ï¼š
  - `/` æˆ– `Ctrl/Cmd + K` æ‰“å¼€
  - `â†‘/â†“` é€‰æ‹©ï¼Œ`Enter` è·³è½¬ï¼Œ`Esc` å…³é—­
  - è¦†ç›– System + å…¨æ¨¡å—è·¯ç”±
- æ¨¡å—é¡µæµå¼è¾“å‡ºï¼š
  - assistant/system æ¶ˆæ¯é€æ®µæ¸²æŸ“
  - æµå¼å…‰æ ‡ + è‡ªåŠ¨æ»šåŠ¨ + å¯ä¸­æ–­é‡å…¥
  - å®¡æ‰¹å‰åæ¶ˆæ¯ç»Ÿä¸€è¿›å…¥æµå¼æ—¶é—´çº¿

## 6.2 è®°å¿†æ¨¡å—ï¼ˆä»»åŠ¡1ï¼‰

- æ–°å¢ `Memory Center`ï¼ˆå‰ç«¯æ¨¡å—ï¼‰ï¼š
  - æ–‡ä»¶è®°å¿†ï¼š`save_memory` / `read_memory` / `list_memories`
  - å‘é‡è®°å¿†ï¼š`rag_save` / `rag_search` / `rag_status`
  - å¯¹è¯å†å²æŸ¥çœ‹ï¼š`read_file(memories/chat_history/latest.json)`
- æ¨¡å—ä¼šè¯æŒä¹…åŒ–ï¼š
  - æ¯ä¸ªæ¨¡å—ç‹¬ç«‹ä¿å­˜ timeline + actionï¼ˆlocalStorageï¼‰
  - è¿›å…¥æ¨¡å—è‡ªåŠ¨æ¢å¤ä¸Šæ¬¡å¯¹è¯
  - æ”¯æŒ `Clear Session` ä¸€é”®é‡ç½®

## 6.3 Skill å¯è§†åŒ–åˆ›å»ºï¼ˆä»»åŠ¡2ï¼‰

- æ–°å¢ `skills/skill_builder_tools.py`ï¼š
  - `skill_scaffold_preview`ï¼šå‚æ•°åŒ–é¢„è§ˆï¼Œä¸å†™æ–‡ä»¶
  - `skill_scaffold_create`ï¼šç”ŸæˆæŠ€èƒ½æ–‡ä»¶å¹¶å¯è‡ªåŠ¨æ³¨å†Œ
- è§„èŒƒåŒ–èƒ½åŠ›ï¼š
  - å‚æ•°æ ¡éªŒï¼ˆname/type/required/defaultï¼‰
  - æ ‡å‡† schema + å‡½æ•°ç­¾åè‡ªåŠ¨ç”Ÿæˆ
  - å¯é€‰è‡ªåŠ¨è¿½åŠ  `skills/__init__.py` å¯¼å…¥
  - å¯é€‰è‡ªåŠ¨å†™å…¥ `core/config.py` çš„ `RISKY_TOOLS`
- AI è¡¥å…¨èƒ½åŠ›ï¼š
  - åç«¯å°è¯•è°ƒç”¨æ¨¡å‹ç”Ÿæˆå‡½æ•°ä½“
  - è‹¥ API Key ç¼ºå¤±æˆ–ç”Ÿæˆå¼‚å¸¸ï¼Œè‡ªåŠ¨å›é€€åˆ°å¯è¿è¡Œæ¨¡æ¿

## 6.4 æµç•…æ€§ä¼˜åŒ–ï¼ˆä»»åŠ¡3ï¼Œå¯é€‰ï¼‰

- è·¯ç”±æ‡’åŠ è½½ï¼š`frontend/src/app/router.tsx`
- æ‰“åŒ…æ‹†åˆ†ï¼š`frontend/vite.config.ts` `manualChunks`
  - `vendor-react` / `vendor-antd` / `vendor-query` / `vendor-state` / `vendor-misc`
  - é™ä½é¦–åŒ…å‹åŠ›ï¼Œæ”¹å–„å¯¼èˆªæµç•…åº¦
